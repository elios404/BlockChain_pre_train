# 이 파일을 실행시켜서 SSE 방식, 서버를 열어 주어야, Claude에서 이 MCP를 인식할 수 있다.

from mcp.server.fastmcp import FastMCP

#-------------------------------------------------------------------
# 1. MCP 서버 인스턴스 생성
#-------------------------------------------------------------------
mcp = FastMCP(
    name="fortune_teller_sse",
    host="0.0.0.0", # 누구나 접근 가능
    port=8005
)

#-------------------------------------------------------------------
# 2. 도구 등록
#-------------------------------------------------------------------
import random

fortunes = [
    "오늘도 별 탈 없이 지나간다면 그게 바로 운이에요 🍀",
    "지금은 가만히 있는 게 최고의 전략일 수도 있어요. 움직이지 마세요 🛌",
    "운명의 상대가 오늘도 당신을 지나쳤습니다... 내일 또 와요 😌",
    "가만히 있으면 중간이라도 가요. 오늘은 중간 지키기에 올인 💼",
    "기대하지 마요. 기대하면 실망만 커져요. (하지만 혹시 모르죠?) 😏",
    "오늘도 참느냐 vs 터뜨리느냐, 그것이 문제로다 💣",
    "계획대로 되지 않는다면… 그게 인생이죠 🎢",
    "지금 떠오른 그 생각… 오늘만큼은 하지 마세요 🙅‍♂️",
    "오늘 커피를 두 잔 이상 마신다면 뭔가 일어납니다 ☕☕",
    "말 한마디가 천 냥 빚을 갚는다지만, 오늘은 그냥 말하지 마요 🫢",
    "알람 껐던 당신, 그건 신의 계시가 아니었어요 ⏰",
    "오늘은 당신이 주인공! 단, 조연처럼 행동하세요 🎬",
    "지갑을 조심하세요. 운보다 지출이 더 빠릅니다 💸",
    "지금 드는 불안감… 맞아요. 뭔가 있긴 있어요 😶",
    "일찍 자면 내일이 빨리 와요. 그게 좋은 건지는 몰라도 😴"
]

# 운세 도구
@mcp.tool()
def get_fortune(name: str) -> str:
    """이름을 입력하면 오늘의 운세를 알려주는 도구입니다."""
    fortune = random.choice(fortunes)
    print(f"[TOOL] {name}의 운세는 → {fortune}")
    return f"{name}님의 운세: {fortune}"
#-------------------------------------------------------------------
# 3. MCP 서버 실행
#-------------------------------------------------------------------
if __name__ == "__main__":
    mcp.run(transport="sse") # 실행 방식 SSE, 실제 내 컴퓨터로 서버를 오픈하는 방식