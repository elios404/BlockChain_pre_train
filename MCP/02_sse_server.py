# ì´ íŒŒì¼ì„ ì‹¤í–‰ì‹œì¼œì„œ SSE ë°©ì‹, ì„œë²„ë¥¼ ì—´ì–´ ì£¼ì–´ì•¼, Claudeì—ì„œ ì´ MCPë¥¼ ì¸ì‹í•  ìˆ˜ ìˆë‹¤.

from mcp.server.fastmcp import FastMCP

#-------------------------------------------------------------------
# 1. MCP ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
#-------------------------------------------------------------------
mcp = FastMCP(
    name="fortune_teller_sse",
    host="0.0.0.0", # ëˆ„êµ¬ë‚˜ ì ‘ê·¼ ê°€ëŠ¥
    port=8005
)

#-------------------------------------------------------------------
# 2. ë„êµ¬ ë“±ë¡
#-------------------------------------------------------------------
import random

fortunes = [
    "ì˜¤ëŠ˜ë„ ë³„ íƒˆ ì—†ì´ ì§€ë‚˜ê°„ë‹¤ë©´ ê·¸ê²Œ ë°”ë¡œ ìš´ì´ì—ìš” ğŸ€",
    "ì§€ê¸ˆì€ ê°€ë§Œíˆ ìˆëŠ” ê²Œ ìµœê³ ì˜ ì „ëµì¼ ìˆ˜ë„ ìˆì–´ìš”. ì›€ì§ì´ì§€ ë§ˆì„¸ìš” ğŸ›Œ",
    "ìš´ëª…ì˜ ìƒëŒ€ê°€ ì˜¤ëŠ˜ë„ ë‹¹ì‹ ì„ ì§€ë‚˜ì³¤ìŠµë‹ˆë‹¤... ë‚´ì¼ ë˜ ì™€ìš” ğŸ˜Œ",
    "ê°€ë§Œíˆ ìˆìœ¼ë©´ ì¤‘ê°„ì´ë¼ë„ ê°€ìš”. ì˜¤ëŠ˜ì€ ì¤‘ê°„ ì§€í‚¤ê¸°ì— ì˜¬ì¸ ğŸ’¼",
    "ê¸°ëŒ€í•˜ì§€ ë§ˆìš”. ê¸°ëŒ€í•˜ë©´ ì‹¤ë§ë§Œ ì»¤ì ¸ìš”. (í•˜ì§€ë§Œ í˜¹ì‹œ ëª¨ë¥´ì£ ?) ğŸ˜",
    "ì˜¤ëŠ˜ë„ ì°¸ëŠëƒ vs í„°ëœ¨ë¦¬ëŠëƒ, ê·¸ê²ƒì´ ë¬¸ì œë¡œë‹¤ ğŸ’£",
    "ê³„íšëŒ€ë¡œ ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´â€¦ ê·¸ê²Œ ì¸ìƒì´ì£  ğŸ¢",
    "ì§€ê¸ˆ ë– ì˜¤ë¥¸ ê·¸ ìƒê°â€¦ ì˜¤ëŠ˜ë§Œí¼ì€ í•˜ì§€ ë§ˆì„¸ìš” ğŸ™…â€â™‚ï¸",
    "ì˜¤ëŠ˜ ì»¤í”¼ë¥¼ ë‘ ì” ì´ìƒ ë§ˆì‹ ë‹¤ë©´ ë­”ê°€ ì¼ì–´ë‚©ë‹ˆë‹¤ â˜•â˜•",
    "ë§ í•œë§ˆë””ê°€ ì²œ ëƒ¥ ë¹šì„ ê°šëŠ”ë‹¤ì§€ë§Œ, ì˜¤ëŠ˜ì€ ê·¸ëƒ¥ ë§í•˜ì§€ ë§ˆìš” ğŸ«¢",
    "ì•ŒëŒ ê»ë˜ ë‹¹ì‹ , ê·¸ê±´ ì‹ ì˜ ê³„ì‹œê°€ ì•„ë‹ˆì—ˆì–´ìš” â°",
    "ì˜¤ëŠ˜ì€ ë‹¹ì‹ ì´ ì£¼ì¸ê³µ! ë‹¨, ì¡°ì—°ì²˜ëŸ¼ í–‰ë™í•˜ì„¸ìš” ğŸ¬",
    "ì§€ê°‘ì„ ì¡°ì‹¬í•˜ì„¸ìš”. ìš´ë³´ë‹¤ ì§€ì¶œì´ ë” ë¹ ë¦…ë‹ˆë‹¤ ğŸ’¸",
    "ì§€ê¸ˆ ë“œëŠ” ë¶ˆì•ˆê°â€¦ ë§ì•„ìš”. ë­”ê°€ ìˆê¸´ ìˆì–´ìš” ğŸ˜¶",
    "ì¼ì° ìë©´ ë‚´ì¼ì´ ë¹¨ë¦¬ ì™€ìš”. ê·¸ê²Œ ì¢‹ì€ ê±´ì§€ëŠ” ëª°ë¼ë„ ğŸ˜´"
]

# ìš´ì„¸ ë„êµ¬
@mcp.tool()
def get_fortune(name: str) -> str:
    """ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ ì•Œë ¤ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤."""
    fortune = random.choice(fortunes)
    print(f"[TOOL] {name}ì˜ ìš´ì„¸ëŠ” â†’ {fortune}")
    return f"{name}ë‹˜ì˜ ìš´ì„¸: {fortune}"
#-------------------------------------------------------------------
# 3. MCP ì„œë²„ ì‹¤í–‰
#-------------------------------------------------------------------
if __name__ == "__main__":
    mcp.run(transport="sse") # ì‹¤í–‰ ë°©ì‹ SSE, ì‹¤ì œ ë‚´ ì»´í“¨í„°ë¡œ ì„œë²„ë¥¼ ì˜¤í”ˆí•˜ëŠ” ë°©ì‹